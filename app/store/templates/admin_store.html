{% extends "base.html" %}

{% block title %}Admin Licencias{% endblock %}

{% block head %}
  {{ super() }}
  <link rel="stylesheet" href="{{ url_for('store_bp.static', filename='css/store.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='fontawesome/css/all.css') }}">
{% endblock %}
{% block content %}
<div class="container mt-2 store-light worksheet-panel admin-licencias-page">
  <div class="d-flex align-items-center">
    <div class="d-flex gap-05 admin-store-menus">
      <button id="menuToggleBtn" class="btn-blue menu-btn-worksheet">&#9776; Menú</button>
      <button id="menu2ToggleBtn" class="btn-blue menu-btn-worksheet">&#9776; Menú2</button>
      <button id="menu3ToggleBtn" class="btn-blue menu-btn-worksheet">&#9776; Menú3</button>
      <button id="menu4ToggleBtn" class="btn-blue menu-btn-worksheet"><i class="fas fa-tools"></i> Her.</button>
    </div>
  </div>
  <div id="mobileMenu" class="mobile-menu-store hidden">
    <div class="menu-title-row">
      <i class="fas fa-bars"></i>
      <h3>Menú</h3>
    </div>
    <a href="{{ url_for('admin_bp.dashboard') }}" class="btn-panel btn-blue mobile-menu-btn mb-04"><i class="fas fa-cogs"></i> Administración</a>
    <a href="{{ url_for('admin_bp.parrafos_page') }}" class="btn-panel btn-blue mobile-menu-btn mb-04"><i class="fas fa-paragraph"></i> Párrafos</a>
    <a href="{{ url_for('admin_bp.filters_page') }}" class="btn-panel btn-blue mobile-menu-btn mb-04"><i class="fas fa-filter"></i> Filtros</a>
    <a href="{{ url_for('admin_bp.regex_page') }}" class="btn-panel btn-blue mobile-menu-btn mb-04"><i class="fas fa-random"></i> Regex</a>
    <a href="{{ url_for('admin_bp.services_page') }}" class="btn-panel btn-blue mobile-menu-btn mb-04"><i class="fas fa-cogs"></i> Servicios</a>
    <a href="{{ url_for('admin_bp.usuarios_page') }}" class="btn-panel btn-blue mobile-menu-btn mb-04"><i class="fas fa-users"></i> Usuarios</a>
    <a href="{{ url_for('admin_bp.security_rules_page') }}" class="btn-panel btn-blue mobile-menu-btn mb-04"><i class="fas fa-shield-alt"></i> Reglas de Seguridad</a>
    <a href="{{ url_for('admin_bp.view_trigger_logs_page') }}" class="btn-panel btn-blue mobile-menu-btn mb-04"><i class="fas fa-clipboard-list"></i> Consultar logs</a>
    <a href="{{ url_for('store_bp.admin_sms') }}" class="btn-panel btn-blue mobile-menu-btn mb-04"><i class="fas fa-sms"></i> Consulta SMS</a>
    <a href="{{ url_for('admin_bp.manage_permissions_page') }}" class="btn-panel btn-blue mobile-menu-btn mb-04"><i class="fas fa-key"></i> Gestión de Permisos</a>
    <button id="btnClearTriggerLogMenu" type="button" class="btn-panel btn-red mobile-menu-btn mb-04"><i class="fas fa-trash"></i> Limpiar Logs</button>
    <a href="{{ url_for('auth_bp.logout') }}" class="btn-panel btn-red mobile-menu-btn mb-04"><i class="fas fa-sign-out-alt"></i> Cerrar Sesión</a>
  </div>

  <!-- MENÚ2 LATERAL MÓVIL -->
  <div id="mobileMenu2" class="mobile-menu-store hidden">
    <div class="menu-title-row">
      <i class="fas fa-bars"></i>
      <h3>Menú2</h3>
    </div>
    <a href="{{ url_for('store_bp.admin_store') }}" class="btn-panel btn-blue mobile-menu-btn mb-04"><i class="fas fa-store"></i> Licencias</a>
    <a href="{{ url_for('store_bp.admin_productos') }}" class="btn-panel btn-blue mobile-menu-btn mb-04"><i class="fas fa-box"></i> Productos</a>
    <a href="{{ url_for('store_bp.admin_coupons') }}" class="btn-panel btn-blue mobile-menu-btn mb-04"><i class="fas fa-ticket-alt"></i> Cupones</a>
    <a href="{{ url_for('store_bp.admin_roles') }}" class="btn-panel btn-blue mobile-menu-btn mb-04"><i class="fas fa-user-tag"></i> Roles</a>
    <a href="{{ url_for('store_bp.admin_tools') }}" class="btn-panel btn-blue mobile-menu-btn mb-04"><i class="fas fa-tools"></i> Herramientas Admin</a>
    <a href="{{ url_for('store_bp.admin_payments') }}" class="btn-panel btn-blue mobile-menu-btn mb-04"><i class="fas fa-credit-card"></i> Pagos</a>
    <a href="{{ url_for('store_bp.admin_work_sheets') }}" class="btn-panel btn-blue mobile-menu-btn mb-04"><i class="fas fa-table"></i> Hojas de Cálculo</a>
    <a href="{{ url_for('store_bp.admin_configurations') }}" class="btn-panel btn-blue mobile-menu-btn mb-04"><i class="fas fa-cog"></i> Configuraciones</a>
          <a href="{{ url_for('store_bp.admin_support') }}" class="btn-panel btn-blue mobile-menu-btn mb-04"><i class="fas fa-headset"></i> Chat Soporte</a>
    <a href="{{ url_for('auth_bp.logout') }}" class="btn-panel btn-red mobile-menu-btn mb-04"><i class="fas fa-sign-out-alt"></i> Cerrar Sesión</a>
  </div>

  <!-- MENÚ3 LATERAL MÓVIL -->
  <div id="mobileMenu3" class="mobile-menu-store hidden">
    <div class="menu-title-row">
      <i class="fas fa-bars"></i>
      <h3>Menú3</h3>
    </div>
    <a href="{{ url_for('store_bp.store_front') }}" class="btn-panel btn-blue mobile-menu-btn mb-04"><i class="fas fa-store"></i> Tienda Pública</a>
    <a href="{{ url_for('store_bp.tools_public') }}" class="btn-panel btn-blue mobile-menu-btn mb-04"><i class="fas fa-tools"></i> Herramientas Pública</a>
    <a href="{{ url_for('store_bp.historial_compras_usuario') }}" class="btn-panel btn-blue mobile-menu-btn mb-04"><i class="fas fa-history"></i> Mi Historial de Compras</a>
    <a href="{{ url_for('main_bp.home') }}" class="btn-panel btn-blue mobile-menu-btn mb-04"><i class="fas fa-code"></i> Códigos</a>
    {% if user_has_codigos2_access() %}
    <a href="{{ url_for('main_bp.home2') }}" class="btn-panel btn-blue mobile-menu-btn mb-04"><i class="fas fa-code"></i> Códigos 2</a>
    {% endif %}
    <a href="{{ url_for('auth_bp.logout') }}" class="btn-panel btn-red mobile-menu-btn mb-04"><i class="fas fa-sign-out-alt"></i> Cerrar Sesión</a>
  </div>

  <!-- MENÚ4 HERRAMIENTAS -->
  <div id="mobileMenu4" class="mobile-menu-store hidden">
    <div class="menu-title-row">
      <i class="fas fa-tools"></i>
      <h3>Herramientas</h3>
    </div>
    <button id="btnGestionarProductos" class="btn-panel btn-blue mobile-menu-btn mb-04"><i class="fas fa-list"></i> Gestionar Productos</button>
    <button id="btnArchivados" class="btn-panel btn-blue mobile-menu-btn mb-04"><i class="fas fa-archive"></i> Archivados <span id="archivadosCount">(0)</span></button>
  </div>
  <div id="menuOverlay" class="menu-overlay"></div>
  <div class="d-flex flex-column align-items-center justify-content-center mb-4 w-100">
    <div class="d-flex flex-wrap align-items-center productos-buscar-mostrar productos-buscar-mostrar-centered">
      <div class="search-container">
        <label for="adminStoreSearch" class="sr-only">Buscar en licencias</label>
        <input type="search" id="adminStoreSearch" class="form-control text-center" placeholder="Buscar..." autocomplete="off">
      </div>
    </div>
  </div>
  
  <!-- Interfaz de Licencias -->
  <div class="licencias-container" id="licenciasContainer">
    <div class="licencias-content">
      <!-- Grid de Licencias -->
      <div id="licensesGrid" class="licenses-grid">
        <!-- Las licencias se cargarán dinámicamente aquí -->
      </div>
    </div>
  </div>
</div>
{% endblock %}

{% block scripts %}
  {{ super() }}
  <meta name="clear_trigger_log_url" content="{{ url_for('admin_bp.clear_trigger_log') }}">
  <script src="{{ url_for('store_bp.static', filename='js/admin_store.js') }}" defer></script>
  <script src="{{ url_for('store_bp.static', filename='js/menu_tienda.js') }}" defer></script>
  <script src="{{ url_for('store_bp.static', filename='js/licencias.js') }}" defer></script>
  <script src="{{ url_for('static', filename='js/clear_trigger_logs.js') }}" defer></script>
{% endblock %} 